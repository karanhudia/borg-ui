# Borgmatic Web UI Environment Configuration
#
# SECURITY NOTICE:
# 1. Copy this file to .env: cp .env.example .env
# 2. Generate secure secrets (see instructions below)
# 3. NEVER commit .env file to git
# 4. Use different secrets for dev/staging/production
#
# =============================================================================

# =============================================================================
# DOCKER IMAGE SETTINGS
# =============================================================================
# Docker image to use (leave as-is to use official pre-built multi-arch image)
# Change only if you're hosting your own image or building locally
DOCKER_IMAGE=ainullcode/borgmatic-ui:latest

# =============================================================================
# ENVIRONMENT
# =============================================================================
# Environment: development, staging, production
# This affects security validation and default behaviors
ENVIRONMENT=development

# =============================================================================
# SECURITY SETTINGS (⚠️ CRITICAL - MUST CHANGE IN PRODUCTION!)
# =============================================================================

# Secret key for JWT tokens
# ⚠️ CRITICAL: Generate a strong random key for production!
#
# Generate with one of these commands:
#   python -c "import secrets; print(secrets.token_urlsafe(32))"
#   openssl rand -base64 32
#   head -c 32 /dev/urandom | base64
#
# Example: SECRET_KEY=a8f5f167f44f4964e6c998dee827110c-CHANGE-THIS
SECRET_KEY=INSECURE-CHANGE-THIS-IN-PRODUCTION

# JWT Algorithm (HS256 is secure and fast)
ALGORITHM=HS256

# Token expiration time in minutes
# Shorter = more secure, but users need to login more often
# Recommended: 30-60 minutes for web, 15 minutes for APIs
ACCESS_TOKEN_EXPIRE_MINUTES=30

# Strict security mode
# When enabled, application will REFUSE to start with insecure settings
# Recommended: true for production, false for development
STRICT_SECURITY=false

# Initial admin password (first startup only)
# ⚠️ Only used if no admin user exists. Change via UI after first login!
# Leave blank to use default 'admin123' (not recommended for production)
# INITIAL_ADMIN_PASSWORD=your-secure-initial-password

# =============================================================================
# DATABASE SETTINGS
# =============================================================================
# SQLite database (persists in ./data directory on host)
# The 4 slashes (////) indicate an absolute path: /app/data/borgmatic.db
# This file is stored on your host at: ./data/borgmatic.db
# ✅ Persists across container rebuilds and updates
# NOTE: Do NOT use relative path like sqlite:///./borgmatic.db
DATABASE_URL=sqlite:////app/data/borgmatic.db

# =============================================================================
# BORGMATIC CONFIGURATION
# =============================================================================
# Path to borgmatic configuration file
BORGMATIC_CONFIG_PATH=/app/config/borgmatic.yaml

# Path to backup storage
BORGMATIC_BACKUP_PATH=/backups

# Enable cron-based automatic backups
ENABLE_CRON_BACKUPS=false

# =============================================================================
# LOGGING
# =============================================================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log file path
LOG_FILE=/app/logs/borgmatic-ui.log

# =============================================================================
# CORS SETTINGS
# =============================================================================
# Allowed origins for CORS (comma-separated list)
CORS_ORIGINS=http://localhost:8000,http://localhost:7879,http://localhost:3000

# =============================================================================
# SERVER SETTINGS
# =============================================================================
# Host to bind to
HOST=0.0.0.0

# Port to listen on
PORT=8000

# Number of worker processes
WORKERS=2

# =============================================================================
# CACHE SETTINGS
# =============================================================================
# Enable in-memory caching
CACHE_ENABLED=true

# Cache TTL in seconds
CACHE_TTL=300

# =============================================================================
# BACKUP SETTINGS
# =============================================================================
# Maximum concurrent backup jobs
MAX_BACKUP_JOBS=5

# Backup operation timeout in seconds
BACKUP_TIMEOUT=3600

# =============================================================================
# HEALTH CHECK SETTINGS
# =============================================================================
# Health check interval in seconds
HEALTH_CHECK_INTERVAL=30

# Health check timeout in seconds
HEALTH_CHECK_TIMEOUT=10

# =============================================================================
# NOTIFICATION SETTINGS (Optional)
# =============================================================================
# Email notifications
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM=borgmatic@yourdomain.com
# NOTIFICATION_EMAIL=admin@yourdomain.com

# Webhook notifications
# WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
# WEBHOOK_ENABLED=false

# =============================================================================
# SSH KEY MANAGEMENT
# =============================================================================
# Encryption key for SSH keys (auto-generated if not set)
# SSH_KEY_ENCRYPTION_KEY=your-encryption-key-here

# =============================================================================
# ENVIRONMENT
# =============================================================================
# Environment: development, staging, production
ENVIRONMENT=development

# Debug mode (enables detailed error pages)
DEBUG=true

# =============================================================================
# RATE LIMITING (Optional)
# =============================================================================
# Rate limit for API requests (requests per minute)
# RATE_LIMIT=60

# =============================================================================
# BACKUP RETENTION (Optional)
# =============================================================================
# Keep daily backups for N days
# RETENTION_DAILY=7

# Keep weekly backups for N weeks
# RETENTION_WEEKLY=4

# Keep monthly backups for N months
# RETENTION_MONTHLY=6

# =============================================================================
# ADVANCED SETTINGS
# =============================================================================
# Disable authentication (NOT RECOMMENDED for production)
# DISABLE_AUTH=false

# API prefix
# API_PREFIX=/api

# Static files path
# STATIC_PATH=/app/static
